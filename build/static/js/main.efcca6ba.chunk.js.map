{"version":3,"sources":["redux/tours/types.js","redux/alerts/setAlerts.action.js","redux/auth/auth.selectors.js","redux/auth/auth.action.js","redux/alerts/types.js","utils/SetAuthToken.js","redux/tours/tours.action.js","redux/bookings/types.js","img/logo-white.png","redux/auth/types.js","redux/alerts/alerts.reducer.js","redux/auth/auth.reducer.js","redux/tours/tours.reducer.js","redux/bookings/bookings.reducer.js","redux/index.js","redux/Store.js","img/logo-green.png","components/footer/Footer.js","components/routing/PrivateRoute.js","alerts/Alert.js","components/header/NavElement.js","components/header/Header.js","components/error-boundary/error-boundary.styles.jsx","components/error-boundary/error-boundary.js","components/spinner/spinner.styles.jsx","components/spinner/spinner.js","App.js","index.js"],"names":["GET_TOURS","GET_TOUR","TOUR_ERRORS","TOURS_ERRORS","LOAD_TOUR","BOOKTOUR","setAlert","msg","alertType","dispatch","id","uuidv4","console","log","type","SET_ALERT","payload","setTimeout","REMOVE_ALERT","selectAuth","state","auth","selectAuthenticated","createSelector","isAuthenticated","selectAuthUser","user","loadUser","a","options","headers","axios","get","res","USER_LOADED","data","response","login","email","password","config","body","JSON","stringify","post","Cookies","set","token","expires","remove","CLEAR_USER","AUTH_ERROR","register","newUser","message","logout","USER_LOGOUT","updateCurrentUser","name","photo","formData","FormData","append","patch","UPDATE_CURRENT_USER","changePassword","newFormData","UPDATE_USER_PASSWORD","setAuthtoken","defaults","common","stripePromise","loadStripe","getAllTours","getTour","slug","tour","bookTour","localStorage","session","redirectToCheckout","sessionId","loadTour","GET_BOOKINGS","initialState","alerts","action","filter","alert","tours","toursBooked","loading","errors","parse","bookings","combineReducers","middlewares","thunk","Store","createStore","rootReducer","composeWithDevTools","applyMiddleware","Footer","className","to","src","LogoGreen","alt","href","connect","Component","component","rest","render","props","length","map","structuredSelector","createStructuredSelector","useSelector","userLinks","onClick","split","guestLinks","useEffect","LogoWhite","ErrorImageOverlay","styled","div","ErrorImageContainer","imageUrl","ErrorImageText","h2","ErrorBoundary","hasErrored","error","info","this","children","React","SpinnerOverlay","SpinnerContainer","Spinner","Tours","lazy","TourDetails","Login","Signup","Account","MyBookings","fallback","exact","path","ReactDOM","store","document","getElementById"],"mappings":"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","file":"static/js/main.efcca6ba.chunk.js","sourcesContent":["export const GET_TOURS = 'GET_TOURS';\nexport const GET_TOUR = 'GET_TOUR';\nexport const TOUR_ERRORS = 'TOUR_ERRORS';\nexport const TOURS_ERRORS = 'TOURS_ERRORS';\nexport const LOAD_TOUR = 'LOAD_TOUR';\nexport const BOOKTOUR = 'BOOKTOUR';\n","import { v4 as uuidv4 } from 'uuid';\nimport { SET_ALERT, REMOVE_ALERT } from './types';\n\nexport const setAlert = (msg, alertType) => (dispatch) => {\n  const id = uuidv4();\n  console.log('Set Alert called here..');\n\n  dispatch({\n    type: SET_ALERT,\n    payload: { msg, alertType, id },\n  });\n\n  setTimeout(() => dispatch({ type: REMOVE_ALERT, payload: id }), 5000);\n};\n","import { createSelector } from 'reselect';\n\nconst selectAuth = (state) => state.auth;\n\nexport const selectAuthenticated = createSelector(\n  selectAuth,\n  (auth) => auth.isAuthenticated\n);\nexport const selectAuthUser = createSelector(selectAuth, (auth) => auth.user);\n","import axios from 'axios';\nimport Cookies from 'js-cookie';\nimport {\n  USER_LOADED,\n  CLEAR_USER,\n  AUTH_ERROR,\n  USER_LOGOUT,\n  UPDATE_CURRENT_USER,\n  UPDATE_USER_PASSWORD,\n} from './types';\n\nimport { setAlert } from '../alerts/setAlerts.action';\n\n//=== Load User\nexport const loadUser = () => async (dispatch) => {\n  try {\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n\n    const res = await axios.get('/api/v1/users/me', options);\n    dispatch({\n      type: USER_LOADED,\n      payload: res.data.data.data,\n    });\n  } catch (err) {\n    console.log('Error from loading the user', err.response);\n  }\n};\n\n//==== Login a User\nexport const login = (email, password) => async (dispatch) => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  const body = JSON.stringify({ email, password });\n\n  try {\n    const res = await axios.post('/api/v1/users/login', body, config);\n    dispatch(setAlert('Success Login', 'success'));\n    Cookies.set('jwt', res.data.token, { expires: 7 });\n    dispatch({\n      type: USER_LOADED,\n      payload: res.data,\n    });\n  } catch (err) {\n    // dispatch(setAlert(err.response.data.message, 'error'))\n    Cookies.remove('jwt');\n    console.log(err.response);\n    dispatch({ type: CLEAR_USER });\n    dispatch({ type: AUTH_ERROR });\n  }\n};\n\n//==== Login a User\nexport const register = (newUser) => async (dispatch) => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  const body = JSON.stringify(newUser);\n\n  try {\n    const res = await axios.post('/api/v1/users/signup', body, config);\n    dispatch(setAlert('Success Register', 'success'));\n    Cookies.set('jwt', res.data.token, { expires: 7 });\n    dispatch({\n      type: USER_LOADED,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch(setAlert(err.response.data.message, 'error'));\n    Cookies.remove('jwt');\n    dispatch({ type: CLEAR_USER });\n    dispatch({ type: AUTH_ERROR });\n  }\n};\n\n//==== Logout user\nexport const logout = () => (dispatch) => {\n  Cookies.remove('jwt');\n  dispatch({ type: USER_LOGOUT });\n};\n\n//===== UPDATE THE CURRENT USE\nexport const updateCurrentUser = (name, email, photo) => async (dispatch) => {\n  const formData = new FormData();\n  formData.append('photo', photo);\n  formData.append('name', name);\n  formData.append('email', email);\n\n  try {\n    const res = await axios.patch('/api/v1/users/updateMe', formData);\n    dispatch(setAlert('User Updated Successfully', 'success'));\n    dispatch({\n      type: UPDATE_CURRENT_USER,\n      payload: res.data.data.user,\n    });\n  } catch (err) {\n    dispatch(setAlert(err.response.data.message, 'error'));\n    // Cookies.remove('jwt');\n  }\n};\n//===== UPDATE THE CURRENT USER'S PASSWORD\nexport const changePassword = (newFormData) => async (dispatch) => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  const body = JSON.stringify(newFormData);\n  try {\n    const res = await axios.patch(\n      '/api/v1/users/updateMyPassword',\n      body,\n      config\n    );\n    dispatch(setAlert('Password update Success', 'success'));\n    dispatch({\n      type: UPDATE_USER_PASSWORD,\n      payload: res.data.data.user,\n    });\n    dispatch({ type: USER_LOGOUT });\n    // Cookies.remove('jwt');\n  } catch (err) {\n    dispatch(setAlert(err.response.data.message, 'error'));\n  }\n};\n","export const SET_ALERT = 'SET_ALERT';\nexport const REMOVE_ALERT = 'REMOVE_ALERT';\n","import axios from 'axios';\n\nconst setAuthtoken = (token) => {\n  if (token) {\n    axios.defaults.headers.common['authorization'] = `Bearer ${token}`;\n  } else {\n    delete axios.defaults.common['authorization'];\n  }\n};\n\nexport default setAuthtoken;\n","//eslint-disable\nimport axios from 'axios';\nimport { loadStripe } from '@stripe/stripe-js';\n\nimport {\n  GET_TOURS,\n  TOURS_ERRORS,\n  GET_TOUR,\n  TOUR_ERRORS,\n  LOAD_TOUR,\n} from './types';\n\nimport setAuthtoken from '../../utils/SetAuthToken';\n\nconst stripePromise = loadStripe(\n  'pk_test_51JRSF2AJHQSuL36xgVLN3iL6uDsgccyG5gdbXPzBwPb6PXXRGG5LPet9720qWUKB7zJ9Hkar7B4fqXs55txpLiBd00x57dIp8g'\n);\n\nexport const getAllTours = () => async (dispatch) => {\n  try {\n    const res = await axios.get('/api/v1/tours');\n    dispatch({\n      type: GET_TOURS,\n      payload: res.data.data.data,\n    });\n  } catch (err) {\n    console.log(err);\n    dispatch({\n      type: TOURS_ERRORS,\n      payload: err,\n    });\n  }\n};\n\nexport const getTour = (slug) => async (dispatch) => {\n  try {\n    const res = await axios.get(`/api/v1/tour/${slug}`);\n    dispatch({\n      type: GET_TOUR,\n      payload: res.data.tour,\n    });\n  } catch (err) {\n    dispatch({\n      type: TOUR_ERRORS,\n      payload: err.response,\n    });\n  }\n};\nexport const bookTour = (id) => async (dispatch) => {\n  if (localStorage.token) {\n    setAuthtoken(localStorage.token);\n  }\n  try {\n    const session = await axios.get(`/api/v1/bookings/checkout-session/${id}`);\n    //===Redirect to stripe Checkout page\n    await (\n      await stripePromise\n    ).redirectToCheckout({\n      sessionId: session.data.session.id,\n    });\n  } catch (err) {\n    console.log('SESSION ERROR MESSAGE:', err.response);\n  }\n};\n\n//==== Load tour\nexport const loadTour = () => (dispatch) => {\n  if (localStorage.tour) {\n    dispatch({\n      type: LOAD_TOUR,\n      payload: localStorage.tour,\n    });\n  }\n};\n","export const GET_BOOKINGS = 'GET_BOOKINGS';\n","export default __webpack_public_path__ + \"static/media/logo-white.6c89a3f0.png\";","export const AUTH_SUCCESS = 'AUTH_SUCCESS';\nexport const USER_LOADED = 'USER_LOADED';\nexport const UPDATE_CURRENT_USER = 'UPDATE_CURRENT_USER';\nexport const UPDATE_USER_PASSWORD = 'UPDATE_USER_PASSWORD';\nexport const USER_LOGOUT = 'USER_LOGOUT';\nexport const CLEAR_USER = 'CLEAR_USER';\nexport const AUTH_ERROR = 'AUTH_ERROR';\n","import { SET_ALERT, REMOVE_ALERT } from './types';\n\nconst initialState = [];\nfunction alerts(state = initialState, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_ALERT:\n      return [...state, payload];\n    case REMOVE_ALERT:\n      return state.filter((alert) => alert.id !== payload);\n\n    default:\n      return state;\n  }\n}\n\nexport default alerts;\n","import {\n  USER_LOADED,\n  AUTH_ERROR,\n  CLEAR_USER,\n  USER_LOGOUT,\n  UPDATE_CURRENT_USER,\n  UPDATE_USER_PASSWORD,\n} from './types';\n\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n};\n\nfunction auth(state = initialState, action) {\n  switch (action.type) {\n    case USER_LOADED:\n      return {\n        ...state,\n        user: action.payload,\n        isAuthenticated: true,\n      };\n    case UPDATE_CURRENT_USER:\n    case UPDATE_USER_PASSWORD:\n      return {\n        ...state,\n        user: action.payload,\n        isAuthenticated: true,\n      };\n    case AUTH_ERROR:\n    case CLEAR_USER:\n    case USER_LOGOUT:\n      return {\n        ...state,\n        user: null,\n        isAuthenticated: false,\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default auth;\n","import {\n  GET_TOURS,\n  GET_TOUR,\n  TOURS_ERRORS,\n  TOUR_ERRORS,\n  LOAD_TOUR,\n  BOOKTOUR,\n} from './types';\n\nconst initialState = {\n  tours: [],\n  tour: null,\n  toursBooked: null,\n  loading: true,\n  errors: null,\n};\n\nfunction tours(state = initialState, action) {\n  switch (action.type) {\n    case GET_TOURS:\n      return {\n        ...state,\n        tours: action.payload,\n        loading: false,\n        errors: null,\n      };\n    case GET_TOUR:\n      return {\n        ...state,\n        tour: action.payload,\n        errors: null,\n        loading: false,\n      };\n    case LOAD_TOUR:\n      return {\n        ...state,\n        tour: JSON.parse(action.payload),\n        errors: null,\n        loading: false,\n      };\n    case BOOKTOUR:\n      return {\n        ...state,\n        toursBooked: action.payload,\n        errors: null,\n        loading: false,\n      };\n    case TOURS_ERRORS:\n      return {\n        ...state,\n        tours: [],\n        tour: null,\n        errors: action.payload,\n        loading: false,\n      };\n    case TOUR_ERRORS:\n      return {\n        ...state,\n        tour: null,\n        errors: action.payload,\n        loading: false,\n      };\n    default:\n      return state;\n  }\n}\n\nexport default tours;\n","import { GET_BOOKINGS } from './types';\n\nconst initialState = {\n  toursBooked: null,\n};\n\nfunction bookings(state = initialState, action) {\n  switch (action.type) {\n    case GET_BOOKINGS:\n      return {\n        ...state,\n        toursBooked: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n\nexport default bookings;\n","import { combineReducers } from 'redux';\nimport alerts from './alerts/alerts.reducer';\nimport auth from './auth/auth.reducer';\nimport tours from './tours/tours.reducer';\nimport bookings from './bookings/bookings.reducer';\n\nexport default combineReducers({\n  tours,\n  auth,\n  bookings,\n  alerts,\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport rootReducer from './index';\n\nconst middlewares = [thunk];\nconst initialState = {};\n\nconst Store = createStore(\n  rootReducer,\n  initialState,\n  composeWithDevTools(applyMiddleware(...middlewares))\n);\n\nexport default Store;\n","export default __webpack_public_path__ + \"static/media/logo-green.de221e6e.png\";","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport LogoGreen from '../../img/logo-green.png';\n\nconst Footer = () => {\n  return (\n    <div className=\"footer\">\n      <div className=\"footer__logo\">\n        <Link to=\"/\">\n          <img src={LogoGreen} alt=\"logo\" />\n        </Link>\n      </div>\n      <ul className=\"footer__nav\">\n        <li>\n          <a href=\"#\">About us</a>\n        </li>\n        <li>\n          <a href=\"#\">Download apps</a>\n        </li>\n        <li>\n          <a href=\"#\">Become a guide</a>\n        </li>\n        <li>\n          <a href=\"#\">Careers</a>\n        </li>\n        <li>\n          <a href=\"#\">Contact</a>\n        </li>\n      </ul>\n      <p className=\"footer__copyright\">\n        &copy; by Mohamed Iman Portfolio. All rights reserved.\n      </p>\n    </div>\n  );\n};\n\nexport default Footer;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\nimport { selectAuthenticated } from '../../redux/auth/auth.selectors';\n\nconst PrivateRoute = ({ component: Component, isAuthenticated, ...rest }) => (\n  <Route\n    {...rest}\n    render={(props) =>\n      !isAuthenticated ? <Redirect to=\"/login\" /> : <Component {...props} />\n    }\n  />\n);\n\nconst mapStateToProps = (state) => ({\n  isAuthenticated: selectAuthenticated(state),\n});\n\nexport default connect(mapStateToProps)(PrivateRoute);\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux';\n\nconst Alert = ({ alerts }) => alerts !== null && alerts.length > 0 && alerts.map(\n    alert => (\n        <div key={alert.id} className={`alert alert--${alert.alertType}`}> {alert.msg}</div>\n    )\n)\n\nconst mapStateToProps = state => ({\n    alerts: state.alerts\n})\nexport default connect(mapStateToProps)(Alert);\n","import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { createStructuredSelector } from 'reselect';\n\nimport { connect, useSelector } from 'react-redux';\nimport { logout } from './../../redux/auth/auth.action';\nimport {\n  selectAuthenticated,\n  selectAuthUser,\n} from '../../redux/auth/auth.selectors';\n\nconst NavElement = ({ logout }) => {\n  const structuredSelector = createStructuredSelector({\n    isAuthenticated: selectAuthenticated,\n    user: selectAuthUser,\n  });\n\n  const { isAuthenticated, user } = useSelector(structuredSelector);\n\n  const userLinks = (\n    <nav className=\"nav nav--user\">\n      <a href=\"/\" className=\"nav__el nav__el--logout\" onClick={logout}>\n        Log Out\n      </a>\n      <Link to=\"/me\" className=\"nav__el\">\n        {user && (\n          <img\n            src={`/img/users/${user.photo}`}\n            alt=\"user\"\n            className=\"nav__user-img\"\n          />\n        )}\n        {user && user.name && <span>{user.name.split(' ')[0]}</span>}\n      </Link>\n    </nav>\n  );\n\n  const guestLinks = (\n    <nav className=\"nav nav--user\">\n      <Link to=\"/login\" className=\"nav__el\">\n        Log in\n      </Link>\n      <Link to=\"/signup\" className=\"nav__el nav__el--cta\">\n        Sign up\n      </Link>\n    </nav>\n  );\n\n  return <Fragment>{!isAuthenticated ? guestLinks : userLinks}</Fragment>;\n};\n// const mapStateToProps = createStructuredSelector({\n//   isAuthenticated: selectAuthenticated,\n//   user: selectAuthUser,\n// });\nexport default connect(null, { logout })(NavElement);\n","import React, { useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport NavElement from './NavElement';\nimport SearchForm from './SearchForm';\nimport LogoWhite from './../../img/logo-white.png';\n\nimport { connect } from 'react-redux';\nimport { loadUser } from '../../redux/auth/auth.action';\nimport { selectAuthenticated } from '../../redux/auth/auth.selectors';\n\nconst Header = ({ isAuthenticated, loadUser }) => {\n  useEffect(() => {\n    if (Cookies.get('jwt')) {\n      loadUser();\n      console.log('Called the loadUser');\n    }\n    //eslint-disable-next-line\n  }, []);\n\n  return (\n    <header className=\"header\">\n      <a href=\"/\" className=\"nav__el\">\n        All tours\n      </a>\n      {/* { isAuthenticated &&\n                 <SearchForm /> \n            } */}\n\n      <div className=\"header__logo\">\n        <a href=\"/\">\n          <img src={LogoWhite} alt=\"Natours logo\" />\n        </a>\n      </div>\n      <NavElement />\n    </header>\n  );\n};\nconst mapStateToProps = (state) => ({\n  isAuthenticated: selectAuthenticated(state),\n});\nexport default connect(mapStateToProps, { loadUser })(Header);\n","import styled from 'styled-components';\n\nexport const ErrorImageOverlay = styled.div`\n  height: 60vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const ErrorImageContainer = styled.div`\n  display: inline-block;\n  background-image: ${({ imageUrl }) => `url(${imageUrl})`};\n  background-size: cover;\n  background-position: center;\n  width: 40vh;\n  height: 40vh;\n`;\n\nexport const ErrorImageText = styled.h2`\n  font-size: 28px;\n  color: #2f8e89;\n`;\n","import React from 'react';\n\nimport {\n  ErrorImageOverlay,\n  ErrorImageContainer,\n  ErrorImageText,\n} from './error-boundary.styles';\n\nclass ErrorBoundary extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      hasErrored: false,\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    // process the error\n    return { hasErrored: true };\n  }\n\n  componentDidCatch(error, info) {\n    console.log(error);\n  }\n\n  render() {\n    if (this.state.hasErrored) {\n      return (\n        <ErrorImageOverlay>\n          <ErrorImageContainer imageUrl=\"https://i.imgur.com/yW2W9SC.png\" />\n          <ErrorImageText>Sorry this page is broken</ErrorImageText>\n        </ErrorImageOverlay>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import styled from \"styled-components\";\n\nexport const SpinnerOverlay = styled.div`\n  height: 60vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const SpinnerContainer = styled.div`\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  border: 3px solid rgba(195, 195, 195, 0.6);\n  border-radius: 50%;\n  border-top-color: #636767;\n  animation: spin 1s ease-in-out infinite;\n  -webkit-animation: spin 1s ease-in-out infinite;\n  @keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n`;\n","import React from 'react';\n\nimport { SpinnerContainer, SpinnerOverlay } from './spinner.styles';\n\nconst Spinner = () => (\n  <SpinnerOverlay>\n    <SpinnerContainer />\n  </SpinnerOverlay>\n);\n\nexport default Spinner;\n","import React, { useEffect, lazy, Suspense, Fragment } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport { connect } from 'react-redux';\n\nimport './App.css';\n\nimport Footer from './components/footer/Footer';\nimport PrivateRoute from './components/routing/PrivateRoute';\n\nimport { getAllTours, loadTour } from './redux/tours/tours.action';\nimport { loadUser } from './redux/auth/auth.action';\nimport Alert from './alerts/Alert';\nimport Headers from './components/header/Header';\nimport setAuthtoken from './utils/SetAuthToken';\nimport ErrorBoundary from './components/error-boundary/error-boundary';\nimport Spinner from './components/spinner/spinner';\n\nconst Tours = lazy(() => import('./components/tours/Tours'));\nconst TourDetails = lazy(() => import('./components/tourDetails/TourDetails'));\nconst Login = lazy(() => import('./components/auth/Login'));\nconst Signup = lazy(() => import('./components/auth/Signup'));\nconst Account = lazy(() => import('./components/account/Account'));\nconst MyBookings = lazy(() => import('./components/bookings/MyBookings'));\n\nconst App = ({ loadUser, getAllTours, loadTour }) => {\n  if (Cookies.get('jwt')) {\n    setAuthtoken(Cookies.get('jwt'));\n    loadUser();\n  }\n\n  useEffect(() => {\n    getAllTours();\n    loadTour();\n\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <Fragment>\n      <Headers />\n      <Alert />\n      <Switch>\n        <ErrorBoundary>\n          <Suspense fallback={Spinner}>\n            <PrivateRoute exact path=\"/me\" component={Account} />\n            <PrivateRoute\n              exact\n              path=\"/bookings/my-tours\"\n              component={MyBookings}\n            />\n            <Route exact path=\"/\" component={Tours} />\n            <Route exact path=\"/tour/:slug\" component={TourDetails} />\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/signup\" component={Signup} />\n          </Suspense>\n        </ErrorBoundary>\n      </Switch>\n      <Footer />\n    </Fragment>\n  );\n};\n\nexport default connect(null, { loadUser, getAllTours, loadTour })(App);\n","import ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport store from './redux/Store';\nimport App from './App';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}